-- MySQL Script generated by MySQL Workbench
-- Mon Dec 18 13:01:43 2017
-- Model: New Model    Version: 1.0
-- MySQL Workbench Forward Engineering

SET @OLD_UNIQUE_CHECKS=@@UNIQUE_CHECKS, UNIQUE_CHECKS=0;
SET @OLD_FOREIGN_KEY_CHECKS=@@FOREIGN_KEY_CHECKS, FOREIGN_KEY_CHECKS=0;
SET @OLD_SQL_MODE=@@SQL_MODE, SQL_MODE='TRADITIONAL,ALLOW_INVALID_DATES';

-- -----------------------------------------------------
-- Schema kapperszaak
-- -----------------------------------------------------

-- -----------------------------------------------------
-- Schema kapperszaak
-- -----------------------------------------------------
CREATE SCHEMA IF NOT EXISTS `kapperszaak` DEFAULT CHARACTER SET utf8 ;
USE `kapperszaak` ;

-- -----------------------------------------------------
-- Table `kapperszaak`.`Medewerker`
-- -----------------------------------------------------
CREATE TABLE IF NOT EXISTS `kapperszaak`.`Medewerker` (
  `id` INT NOT NULL,
  `voornaam` VARCHAR(45) NOT NULL,
  `tussenvoegsel` VARCHAR(45) NULL,
  `achternaam` VARCHAR(45) NOT NULL,
  `telefoon` INT NOT NULL,
  PRIMARY KEY (`id`))
ENGINE = InnoDB;


-- -----------------------------------------------------
-- Table `kapperszaak`.`Klant`
-- -----------------------------------------------------
CREATE TABLE IF NOT EXISTS `kapperszaak`.`Klant` (
  `id` INT NOT NULL,
  `voornaam` VARCHAR(45) NOT NULL,
  `tussenvoegsel` VARCHAR(45) NULL,
  `achternaam` VARCHAR(45) NOT NULL,
  `telefoon` INT NOT NULL,
  PRIMARY KEY (`id`))
ENGINE = InnoDB;


-- -----------------------------------------------------
-- Table `kapperszaak`.`Specialiteit`
-- -----------------------------------------------------
CREATE TABLE IF NOT EXISTS `kapperszaak`.`Specialiteit` (
  `id` INT NOT NULL,
  `naam` VARCHAR(45) NOT NULL,
  PRIMARY KEY (`id`))
ENGINE = InnoDB;


-- -----------------------------------------------------
-- Table `kapperszaak`.`Behandeling`
-- -----------------------------------------------------
CREATE TABLE IF NOT EXISTS `kapperszaak`.`Behandeling` (
  `Code` VARCHAR(4) NOT NULL,
  `naam` VARCHAR(45) NOT NULL,
  `duur` VARCHAR(45) NOT NULL,
  `prijs` INT NOT NULL,
  PRIMARY KEY (`Code`))
ENGINE = InnoDB;


-- -----------------------------------------------------
-- Table `kapperszaak`.`Afspraak`
-- -----------------------------------------------------
CREATE TABLE IF NOT EXISTS `kapperszaak`.`Afspraak` (
  `Datum_tijd` DATETIME NOT NULL,
  `Klant_id` INT NOT NULL,
  `Medewerker_id` INT NOT NULL,
  PRIMARY KEY (`Klant_id`, `Datum_tijd`),
  INDEX `fk_Afspraak_Klant1_idx` (`Klant_id` ASC),
  INDEX `fk_Afspraak_Medewerker1_idx` (`Medewerker_id` ASC),
  CONSTRAINT `fk_Afspraak_Klant1`
    FOREIGN KEY (`Klant_id`)
    REFERENCES `kapperszaak`.`Klant` (`id`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION,
  CONSTRAINT `fk_Afspraak_Medewerker1`
    FOREIGN KEY (`Medewerker_id`)
    REFERENCES `kapperszaak`.`Medewerker` (`id`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION)
ENGINE = InnoDB;


-- -----------------------------------------------------
-- Table `kapperszaak`.`Medewerker_has_specialiteit`
-- -----------------------------------------------------
CREATE TABLE IF NOT EXISTS `kapperszaak`.`Medewerker_has_specialiteit` (
  `specialiteit_id` INT NOT NULL,
  `medewerker_id` INT NOT NULL,
  PRIMARY KEY (`specialiteit_id`, `medewerker_id`),
  INDEX `fk_Specialiteit_has_Medewerker_Medewerker1_idx` (`medewerker_id` ASC),
  INDEX `fk_Specialiteit_has_Medewerker_Specialiteit_idx` (`specialiteit_id` ASC),
  CONSTRAINT `fk_Specialiteit_has_Medewerker_Specialiteit`
    FOREIGN KEY (`specialiteit_id`)
    REFERENCES `kapperszaak`.`Specialiteit` (`id`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION,
  CONSTRAINT `fk_Specialiteit_has_Medewerker_Medewerker1`
    FOREIGN KEY (`medewerker_id`)
    REFERENCES `kapperszaak`.`Medewerker` (`id`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION)
ENGINE = InnoDB;


-- -----------------------------------------------------
-- Table `kapperszaak`.`Afspraak_has_Behandeling`
-- -----------------------------------------------------
CREATE TABLE IF NOT EXISTS `kapperszaak`.`Afspraak_has_Behandeling` (
  `Afspraak_Klant_id` INT NOT NULL,
  `Afspraak_Datum_tijd` DATETIME NOT NULL,
  `Behandeling_Code` VARCHAR(4) NOT NULL,
  PRIMARY KEY (`Afspraak_Klant_id`, `Afspraak_Datum_tijd`, `Behandeling_Code`),
  INDEX `fk_Afspraak_has_Behandeling_Behandeling1_idx` (`Behandeling_Code` ASC),
  INDEX `fk_Afspraak_has_Behandeling_Afspraak1_idx` (`Afspraak_Klant_id` ASC, `Afspraak_Datum_tijd` ASC),
  CONSTRAINT `fk_Afspraak_has_Behandeling_Afspraak1`
    FOREIGN KEY (`Afspraak_Klant_id` , `Afspraak_Datum_tijd`)
    REFERENCES `kapperszaak`.`Afspraak` (`Klant_id` , `Datum_tijd`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION,
  CONSTRAINT `fk_Afspraak_has_Behandeling_Behandeling1`
    FOREIGN KEY (`Behandeling_Code`)
    REFERENCES `kapperszaak`.`Behandeling` (`Code`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION)
ENGINE = InnoDB;


SET SQL_MODE=@OLD_SQL_MODE;
SET FOREIGN_KEY_CHECKS=@OLD_FOREIGN_KEY_CHECKS;
SET UNIQUE_CHECKS=@OLD_UNIQUE_CHECKS;
